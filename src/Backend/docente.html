<!DOCTYPE html>
<html lang="es">
<head>
    <script src="https://unpkg.com/lucide@latest"></script>

  <meta charset="UTF-8">
  <title>Panel Docente - SWIAPPE</title>
  <style>
    body {
      margin: 0; 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f4f6f9; 
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar fijo */
    #sidebar {
      width: 200px; 
      background: #132949; 
      color: white;
      height: 100vh; 
      display: flex; 
      flex-direction: column; 
      padding: 20px;
      position: fixed; 
      top: 0; 
      left: 0;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }
    #sidebar h2 { 
      margin: 0 0 20px; 
      font-size: 20px; 
      display: flex; 
      align-items: center; 
      gap: 8px;
    }
    .menu-item {
      margin: 8px 0; 
      padding: 10px; 
      cursor: pointer; 
      border-radius: 6px; 
      transition: background 0.3s;
      display: flex; 
      align-items: center; 
      gap: 8px;
    }
    .menu-item:hover { background: #132949; }

    /* Contenido principal */
    #main {
      margin-left: 240px; /* espacio para el sidebar */
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100vh;
      background: #fff; 
      box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
    }

    /* Encabezado fijo */
    #header {
      font-size: 22px; 
      font-weight: bold; 
      padding: 20px; 
      background: #fff;
      border-bottom: 1px solid #ddd;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    /* √Årea con scroll */
    #content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    /* Tabla */
    table {
      width: 100%; 
      border-collapse: collapse;
      background: #fff; 
      border-radius: 8px; 
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    table th, table td {
      padding: 12px; 
      text-align: left; 
      border-bottom: 1px solid #eee;
    }
    table th { background: #f8f9fa; }
    table tr:hover { background: #f1f5ff; }

    .btn {
      padding: 6px 12px; 
      border: none; 
      border-radius: 6px;
      cursor: pointer; 
      font-size: 14px; 
      transition: background 0.3s;
    }
    .btn-primary { background: #132949; color: white; }
    .btn-primary:hover { background: #132949; }

    /* Modal */
    #modal {
      display: none; 
      position: fixed; 
      top: 0; left: 0; 
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); 
      justify-content: center; 
      align-items: center;
    }
    #modal-content {
      background: white; 
      padding: 20px; 
      border-radius: 10px;
      width: 400px; 
      max-height: 80vh; 
      overflow-y: auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    #modal h3 { margin-top: 0; }
    #close { float: right; cursor: pointer; color: red; font-weight: bold; }
    .menu-item {
  cursor: pointer;
  padding: 10px 20px;
  background-color: #4a90e2;
  color: white;
  border-radius: 8px;
  text-align: center;
}
.menu-item:hover {
  background-color: #357ab8;
}

  </style>
</head>
<body>
  <!-- Sidebar fijo -->
  <div id="sidebar">
    <h2>üë®‚Äçüè´ Docente</h2>
    <div class="menu-item">üìã Estudiantes</div>
    <div class="menu-item">üìò Competencias</div>
    <a href="http://127.0.0.1:5000/" class="menu-item">
  <i data-lucide="upload"></i> Subir archivos
</a>

<a href="chat.html" class="menu-item">
  <i data-lucide="bot"></i> Chatbot
</a>

    <div class="menu-item">‚öô Configuraci√≥n</div>
  </div>

  <!-- Main content con scroll -->
  <div id="main">
    <div id="header">Panel Docente - SWIAPPE</div>
    <div id="content">
      <h3>Estudiantes</h3>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Secci√≥n</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tabla-estudiantes"></tbody>
      </table>
    </div>
  </div>

  <!-- Modal -->
  <div id="modal">
    <div id="modal-content">
      <span id="close">&times;</span>
      <h3>Competencias del Estudiante</h3>
      <table style="width:100%;">
        <thead>
          <tr>
            <th>Competencia</th>
            <th>Calificaci√≥n</th>
          </tr>
        </thead>
        <tbody id="tabla-competencias"></tbody>
      </table>
    </div>
  </div>

  <script>
    const tabla = document.getElementById("tabla-estudiantes");
    const modal = document.getElementById("modal");
    const closeBtn = document.getElementById("close");
    const tablaCompetencias = document.getElementById("tabla-competencias");

    async function cargarEstudiantes() {
      const res = await fetch("http://127.0.0.1:8000/docente/estudiantes");
      const data = await res.json();
      tabla.innerHTML = "";
      data.forEach(est => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${est.id}</td>
          <td>${est.nombre}</td>
          <td>${est.seccion}</td>
          <td>
            <button class="btn btn-primary" onclick="verCompetencias(${est.id}, '${est.nombre}')">
              Ver Competencias
            </button>
          </td>
        `;
        tabla.appendChild(row);
      });
    }

    async function verCompetencias(id, nombre) {
      const res = await fetch(`http://127.0.0.1:8000/docente/competencias/${id}`);
      const data = await res.json();
      tablaCompetencias.innerHTML = "";
      data.forEach(c => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${c.competencia}</td><td>${c.calificacion}</td>`;
        tablaCompetencias.appendChild(row);
      });
      modal.style.display = "flex";
    }

    closeBtn.onclick = () => modal.style.display = "none";
    window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

    // Inicial
    cargarEstudiantes();
  </script>
  <script>
  lucide.createIcons();
</script>

</body>
</html>
